var QueryString = function () {
  // This function is anonymous, is executed immediately and 
  // the return value is assigned to QueryString!
  var query_string = {};
  var query = window.location.search.substring(1);
  var vars = query.split("&");
  for (var i=0;i<vars.length;i++) {
    var pair = vars[i].split("=");
        // If first entry with this name
    if (typeof query_string[pair[0]] === "undefined") {
      query_string[pair[0]] = decodeURIComponent(pair[1]);
        // If second entry with this name
    } else if (typeof query_string[pair[0]] === "string") {
      var arr = [ query_string[pair[0]],decodeURIComponent(pair[1]) ];
      query_string[pair[0]] = arr;
        // If third or later entry with this name
    } else {
      query_string[pair[0]].push(decodeURIComponent(pair[1]));
    }
  } 
  return query_string;
}();

function LoadShow(className) {
    $("." + className).show();
}

function LoadClose(className) {
    $("." + className).hide();
}

function isMobileDev() {
    var isMobile = {
        Android: function() {
            return navigator.userAgent.match(/Android/i);
        },
        BlackBerry: function() {
            return navigator.userAgent.match(/BlackBerry/i);
        },
        iOS: function() {
            return navigator.userAgent.match(/iPhone|iPad|iPod/i);
        },
        Opera: function() {
            return navigator.userAgent.match(/Opera Mini/i);
        },
        Windows: function() {
            return navigator.userAgent.match(/IEMobile/i);
        },
        any: function() {
            return (isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Opera() || isMobile.Windows());
        }
    };
    if (isMobile.any()) {
        return true;
    } else {
        return false;
    }
}

function GetDataTableAttrs(){
    if(isMobileDev()){
        return {responsive : true, bFilter: true,bLengthChange: false};
    }else{
        return { //讓#myTable 執行DataTable 函式套件
            // order : [[ 0, 'asc' ]], asc是遞增；第一欄排序功能是往下遞增
            responsive : true, //打開 #myTable表格RWD 的功能
            searching : true, //打開原有的search功能
            info:     true,
            filter:     true,
            paging:   true,
            ordering :   true, //打開 排序功能
            language : {
                lengthMenu : "顯示 _MENU_ 筆記錄",
                zeroRecords : "無符合資料",
                info : "目前記錄：_START_ 至 _END_, 總筆數：_TOTAL_",
                infoEmpty : "目前記錄： 0 至 0 , 總筆數：0",
                paginate : {
                    first : "第一頁",
                    last : "最後一頁",
                    next : "Next",
                    previous : "Previous"
                }
            }
        };
    }
}

function LoadGeneral() {
    $('.pagination').pagination({ //讓#pagination_sm 執行pagination 函式套件
        first:'«', //修改first為 << 頁碼文字
        last:'»', //修改last為 >> 頁碼文字
        totalPages: 20, //總頁數20頁
        visiblePages: 2, //顯示2頁
        onPageClick: function (event, page) { //按頁碼之後會執行的事
            $('#page-content_sm').text('Page ' + page);
        }
    });
    $(".typeSel").click(function() {
        var ao = JSON.parse(apps);
        var ah = '<div class="form-group">';
        for (var k in ao) {
            var _dis = (ao[k]['opened'] !== '1') ? 'disabled="disabled"' : '';
            var _sel = (ao[k]['sel'] === '1') ? 'checked="checked""' : '';
            ah += '<div class="radio"><label><input type="radio" name="systemRadios" value="'+ao[k]['app_id']+'"'+_dis+' '+_sel+'>'+ao[k]['app_name']+'</label></div>';
        }
        ah += '</div>';
        
        BootstrapDialog.show({
            title: '系統切換選擇',
            type: BootstrapDialog.TYPE_SUCCESS,
            message: ah,
            buttons: [{
                label: '取消',
                cssClass: 'btn-warning',
                action: function() {
                    BootstrapDialog.closeAll();
                }
            }, {
                label: '確定',
                cssClass: 'btn-primary',
                hotkey: 13,
                action: function() {
                    var choice = $('input[name=systemRadios]:checked').val();
					location.href = choice;
                    //$(".typeSel>span").text($('input[name=systemRadios]:checked').parent().text());
                    //BootstrapDialog.closeAll();
                }
            }]
        });
    });
}
