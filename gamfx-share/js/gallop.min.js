var QueryString = function () {
  // This function is anonymous, is executed immediately and 
  // the return value is assigned to QueryString!
  var query_string = {};
  var query = window.location.search.substring(1);
  var vars = query.split("&");
  for (var i=0;i<vars.length;i++) {
    var pair = vars[i].split("=");
        // If first entry with this name
    if (typeof query_string[pair[0]] === "undefined") {
      query_string[pair[0]] = decodeURIComponent(pair[1]);
        // If second entry with this name
    } else if (typeof query_string[pair[0]] === "string") {
      var arr = [ query_string[pair[0]],decodeURIComponent(pair[1]) ];
      query_string[pair[0]] = arr;
        // If third or later entry with this name
    } else {
      query_string[pair[0]].push(decodeURIComponent(pair[1]));
    }
  } 
  return query_string;
}();

function LoadShow(className) {
    $("." + className).show();
}

function LoadClose(className) {
    $("." + className).hide();
}

function isMobileDev() {
    var isMobile = {
        Android: function() {
            return navigator.userAgent.match(/Android/i);
        },
        BlackBerry: function() {
            return navigator.userAgent.match(/BlackBerry/i);
        },
        iOS: function() {
            return navigator.userAgent.match(/iPhone|iPad|iPod/i);
        },
        Opera: function() {
            return navigator.userAgent.match(/Opera Mini/i);
        },
        Windows: function() {
            return navigator.userAgent.match(/IEMobile/i);
        },
        any: function() {
            return (isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Opera() || isMobile.Windows());
        }
    };
    if (isMobile.any()) {
        return true;
    } else {
        return false;
    }
}

function GetDataTableAttrs(){
    if(isMobileDev()){
        return {"scrollX": true,"bFilter": true,"bLengthChange": false};
    }else{
        var $table = $('table');
        if($table.length == 0) return {};
        if($table.width() > $table.parent().width()){
            return {"scrollX": true, "bLengthChange": false};
        }else{
            return {};
        }
    }
}

function LoadGeneral() {
    $(".typeSel").click(function() {
        var ao = JSON.parse(apps);
        var ah = '<div class="form-group">';
        for (var k in ao) {
            var _dis = (ao[k]['opened'] !== '1') ? 'disabled="disabled"' : '';
            var _sel = (ao[k]['sel'] === '1') ? 'checked="checked""' : '';
            ah += '<div class="radio"><label><input type="radio" name="systemRadios" value="'+ao[k]['app_id']+'"'+_dis+' '+_sel+'>'+ao[k]['app_name']+'</label></div>';
        }
        ah += '</div>';
        
        BootstrapDialog.show({
            title: '系統切換選擇',
            type: BootstrapDialog.TYPE_SUCCESS,
            message: ah,
            buttons: [{
                label: '取消',
                cssClass: 'btn-warning',
                action: function() {
                    BootstrapDialog.closeAll();
                }
            }, {
                label: '確定',
                cssClass: 'btn-primary',
                hotkey: 13,
                action: function() {
                    var choice = $('input[name=systemRadios]:checked').val();
					location.href = choice;
                    //$(".typeSel>span").text($('input[name=systemRadios]:checked').parent().text());
                    //BootstrapDialog.closeAll();
                }
            }]
        });
    });
}
